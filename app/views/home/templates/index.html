{% extends "base.html" %}

{% block title %}
    Public Journal - Home
{% endblock title %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="{{url_for('.static', filename='css/home.css')}}">
{% endblock styles %}

{% block scripts %}
{% endblock scripts %}

{% block content %}
<h1>World of Journals</h1>
<p>Where every thought finds a safe haven...</p>
<h4 class="welcome">Welcome,<span class="username">
    {% if current_user.is_authenticated %}
        {{- current_user.username -}}
    {% else %}
        Guest
    {%- endif -%}
</span>!</h4>
<div class="nav">
    <form id="login-form" action="{{url_for('auth.login')}}">        
    </form>
    <form id="logout-form" action="{{url_for('auth.logout')}}"></form>        
    </form>
    {% if current_user.is_anonymous %}
        <button type="submit" form="login-form" class="btn btn-primary">Login</button>
    {% endif %}
    {% block add_journal_button %}
    <button type="sumbit" form="add-journal-form" class="btn btn-primary">Add Journal</button>
    {% endblock add_journal_button %}
    {% if current_user.is_authenticated %}
        <button type="submit" form="logout-form" class="btn btn-primary">Logout</button>
    {% endif %}
</div>

<form id="add-journal-form" action="{{url_for('journal.add_journal')}}"></form>        
</form>
{% for journal in journals %}
    <li>
        <div class="journal">
            <p>Title: {{journal.title}}</p>
            <p>Author: 
                {% if journal.is_anonymous %}
                 Anonymous
                {% else %}
                {{journal.author.username}}</p>
                {% endif %}
            <p>Private: {{journal.is_private}}</p>
            <p>Anonymous: {{journal.is_anonymous}}</p>
            <p>{{journal.content}}</p>
        </div>
        <div class="actions">
            <form id="read-journal-{{journal.id}}-form" action="{{url_for('journal.read_journal', id=journal.id)}}"></form>        
            </form>
            <button type="sumbit" form="read-journal-{{journal.id}}-form" class="btn btn-primary">Read</button>
            {% if current_user.is_authenticated and journal.author.username == current_user.username %}
            <button type="button" class="btn btn-primary">Edit</button>
            <button type="button" class="btn btn-primary">Delete</button>
            {% endif %}
            {{self.add_journal_button()}}
        </div>
        <hr>
    </li>
{% endfor %}
{% endblock content %}